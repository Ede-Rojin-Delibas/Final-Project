{% extends "base.html" %}

{% block title %}Profil{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto mt-10 p-6 bg-white shadow-md rounded-lg">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">ðŸ‘‹ Merhaba, {{ current_user.username }}!</h2>
    <p class="text-gray-600"><strong>Email:</strong> {{ current_user.email }}</p>
    <p class="text-gray-600"><strong>KullanÄ±cÄ± AdÄ±:</strong> {{ current_user.username }}</p>
    <p class="text-gray-600"><strong>KayÄ±t Tarihi:</strong> {{ current_user.created_at.strftime('%d.%m.%Y') }}</p>

    <hr class="my-4 border-gray-300">

    <h4 class="text-lg font-semibold text-gray-800 mb-4">ðŸ“ˆ Toplam Ãœretim: 
        <span class="inline-block bg-blue-500 text-white text-sm font-medium px-3 py-1 rounded-full">
            {{ total_production }}
        </span>
    </h4>

    <form method="POST" class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
        <input type="date" name="start_date" class="border rounded px-3 py-2 w-full focus:ring-2 focus:ring-blue-500" required>
        <input type="date" name="end_date" class="border rounded px-3 py-2 w-full focus:ring-2 focus:ring-blue-500" required>
        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded px-3 py-2 w-full">
            Filtrele
        </button>
    </form>

    <h5 class="text-lg font-semibold text-gray-800 mt-6 mb-4">ðŸ•’ Ãœretim GeÃ§miÅŸin</h5>
    <div class="overflow-x-auto">
        <table class="min-w-full table-auto border border-gray-200 text-sm">
            <thead>
                <tr class="bg-gray-100 text-left text-gray-700">
                    <th class="px-4 py-2 border-b">Tarih</th>
                    <th class="px-4 py-2 border-b">TÃ¼r</th>
                    <th class="px-4 py-2 border-b">SatÄ±r</th>
                    <th class="px-4 py-2 border-b">SÃ¼tun</th>
                    <th class="px-4 py-2 border-b">Format</th>
                    <th class="px-4 py-2 border-b">Ä°ndir</th>
                    <th class="px-4 py-2 border-b">Sil</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
            {% if productions %}
                {% for production in productions %}
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-2">{{ production.date.strftime('%d.%m.%Y') }}</td>
                    <td class="px-4 py-2">{{ production.type }}</td>
                    <td class="px-4 py-2">{{ production.row }}</td>
                    <td class="px-4 py-2">{{ production.column }}</td>
                    <td class="px-4 py-2">{{ production.format }}</td>
                    <td class="px-4 py-2">
                        <a href="{{ url_for('download', id=production.id) }}"
                           class="text-blue-600 hover:underline font-medium">Ä°ndir</a>
                    </td>
                    <td class="px-4 py-2">
                        <a href="{{ url_for('delete', id=production.id) }}"
                           class="text-red-600 hover:underline font-medium">Sil</a>
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="7" class="text-center text-gray-500 px-4 py-4">HenÃ¼z Ã¼retim verisi bulunmamaktadÄ±r.</td>
                </tr>
            {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}